# AI Trading Agent для Bybit

Автоматический торговый агент на Python, который использует DeepSeek AI для анализа рынка криптовалют и принятия торговых решений на бирже Bybit.

## Описание

Агент работает по следующему алгоритму:

1. **Сбор данных** (каждые 5 минут):
   - Исторические 5-минутные графики выбранной торговой пары за последние 7 дней
   - Исторические данные по золоту (XAUT/USDT) для анализа корреляций
   - Исторические данные по серебру (XAGUSD) для анализа корреляций
   - Данные о вероятности прекращения огня в конфликте Россия-Украина с Polymarket

2. **Анализ с помощью DeepSeek AI**:
   - Отправка собранных данных в DeepSeek
   - Получение торговой рекомендации (покупать/продавать/держать)

3. **Исполнение торговой операции**:
   - Выполнение рекомендации через API Bybit

## Особенности

✅ **Универсальная торговля** - поддержка любой торговой пары (BTC, ETH, SOL, LTC и др.)
✅ **AI-анализ** - использование DeepSeek для принятия торговых решений
✅ **Корреляционный анализ** - учет движения золота и серебра
✅ **Геополитический фактор** - анализ данных с Polymarket
✅ **Автоматизация** - запуск каждые 5 минут по расписанию
✅ **Безопасность** - таймауты, лимиты и детальное логирование

## Структура проекта

```
ai-agent-trader/
├── config.py              # Конфигурация приложения
├── bybit_client.py        # Клиент для работы с Bybit API
├── polymarket_client.py   # Клиент для парсинга Polymarket
├── deepseek_client.py     # Клиент для работы с DeepSeek AI
├── trading_agent.py       # Основная логика торгового агента
├── main.py                # Точка входа и планировщик
├── requirements.txt       # Зависимости проекта
├── .env.example           # Пример файла с переменными окружения
└── README.md              # Документация
```

## Установка

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Настройка переменных окружения

Создайте файл `.env` на основе `.env.example`:

```bash
cp .env.example .env
```

Отредактируйте `.env` и заполните необходимые параметры:

```env
# Bybit API credentials
BYBIT_API_KEY=your_api_key_here
BYBIT_API_SECRET=your_api_secret_here
BYBIT_TESTNET=false  # true для тестовой сети, false для продакшена

# DeepSeek API
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_API_BASE=https://api.deepseek.com

# Trading parameters
MAX_TRADING_VOLUME=100      # Максимальный доступный объем средств (USDT)
TRADING_PAIR=BTCUSDT        # Любая пара: BTCUSDT, ETHUSDT, SOLUSDT, LTCUSDT и т.д.
MAX_TRADE_AMOUNT=10         # Максимальная сумма одной сделки (USDT)
INTERVAL_MINUTES=5          # Интервал запуска агента (минуты)
```

### 3. Получение API ключей

#### Bybit API:
1. Зарегистрируйтесь на [Bybit](https://www.bybit.com/)
2. Перейдите в настройки API: Account > API Management
3. Создайте новый API ключ с правами на торговлю
4. **Важно**: Для тестирования используйте `BYBIT_TESTNET=true`

#### DeepSeek API:
1. Зарегистрируйтесь на [DeepSeek](https://platform.deepseek.com/)
2. Получите API ключ в личном кабинете
3. Скопируйте ключ в `.env`

## Запуск

### Обычный запуск

```bash
python main.py
```

### Запуск в фоновом режиме (Linux/macOS)

```bash
nohup python main.py > output.log 2>&1 &
```

### Остановка агента

Нажмите `Ctrl+C` для остановки агента.

## Параметры конфигурации

| Параметр | Описание | Значение по умолчанию |
|----------|----------|----------------------|
| `MAX_TRADING_VOLUME` | Максимальный доступный объем средств для торговли (USDT) | 100 |
| `TRADING_PAIR` | Криптовалютная пара для торговли (любая доступная на Bybit) | BTCUSDT |
| `MAX_TRADE_AMOUNT` | Максимальная сумма одной сделки (USDT) | 10 |
| `INTERVAL_MINUTES` | Интервал запуска агента (минуты) | 5 |
| `HISTORICAL_DAYS` | Количество дней исторических данных | 7 |

## Логирование

Агент записывает логи в:
- Консоль (stdout)
- Файл `trading_agent.log`

Уровень логирования: `INFO`

## Безопасность

⚠️ **Важно**:

1. **Никогда не коммитьте файл `.env` в git** - он содержит секретные ключи
2. **Используйте тестовую сеть** (`BYBIT_TESTNET=true`) для первых запусков
3. **Начинайте с малых сумм** для проверки работы агента
4. **Регулярно проверяйте логи** для контроля работы агента
5. **Установите лимиты** на API ключ в настройках Bybit

## Принцип работы DeepSeek анализа

DeepSeek получает:
- Технические данные по BTC, золоту, серебру (цены, объемы, изменения)
- Геополитическую информацию с Polymarket
- Текущую цену и торговые параметры

На основе этих данных DeepSeek:
1. Анализирует тренды и корреляции
2. Учитывает риски и объемы
3. Принимает решение: покупать/продавать/держать
4. Определяет ценовой диапазон и сумму сделки

## Troubleshooting

### Ошибка подключения к Bybit
- Проверьте правильность API ключей
- Убедитесь, что IP адрес добавлен в whitelist (если настроено)
- Проверьте права API ключа

### Ошибка DeepSeek API
- Проверьте правильность API ключа
- Убедитесь в наличии средств на балансе DeepSeek
- Проверьте лимиты запросов

### Не удается получить данные с Polymarket
- Проверьте интернет-соединение
- Сайт может быть временно недоступен (агент продолжит работу с примечанием)

## Лицензия

MIT

## Отказ от ответственности

Этот торговый агент создан исключительно в образовательных целях. Торговля криптовалютами сопряжена с высоким риском. Автор не несет ответственности за финансовые потери, возникшие в результате использования этого программного обеспечения.

**Используйте на свой страх и риск.**
